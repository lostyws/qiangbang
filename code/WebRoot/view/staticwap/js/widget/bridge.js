define("bridge",[],function(require,exports,module){!function(window){function log(){DEBUG&&console.log.call(console,Array.prototype.join.call(arguments," "))}function invoke(e){if(log("invoke",e),ANDROID)prompt(e);else if(IOS)if(ua.indexOf("ZBJ/8")>0||ua.indexOf("ZBJ/9")>0){var t=document.createElement("IFRAME");t.setAttribute("src","bridge://"+e),document.documentElement.appendChild(t),t.parentNode.removeChild(t),t=null}else location.href="bridge://"+e}var DEBUG=!!~window.location.href.indexOf("bridge-debug=true"),callbacks={},guid=0,ua=navigator.userAgent,ANDROID=/android/i.test(ua),IOS=/iphone|ipad/i.test(ua),WP=/windows phone/i.test(ua),Bridge={callByJS:function(e){log("callByJS",JSON.stringify(e));var t={};t.name=e.name,t.token=++guid,t.param=e.param||{},callbacks[t.token]=e.callback,invoke(JSON.stringify(t))},callByNative:function(opt){log("callByNative",JSON.stringify(opt));var callback=callbacks[opt.token],ret=opt.ret||{},script=opt.script||"";if(script){log("callByNative script",script);try{invoke(JSON.stringify({token:opt.token,ret:eval(script)}))}catch(e){console.error(e)}}else if(callback){callback(ret);try{delete callback,log(callbacks)}catch(e){console.error(e)}}},branch:function(e){var t=e.platform||0,a=!1,o=ua.toLowerCase().match("zbj_android"),i=ua.toLowerCase().match("zbj_ios");switch(t){case 0:a=o||i;break;case 1:a=o;break;case 2:a=i}a?(this.callByJS(e.bridgeData),"function"==typeof e.successCallback&&e.successCallback()):"function"==typeof e.normalCallback&&e.normalCallback()}},getQueryStringArgs=function(){var e=location.search.length>0?location.search.substring(1):"",t={},a=e.split("&"),o=a.length,i=null,l=null;if(0!=e.length){for(var r,n=0;o>n;n++)r=a[n].split("="),i=decodeURI(r[0]),l=decodeURI(r[1]),t[i]=l;return t}};window.Bridge=Bridge,window.__log=log,window.getQueryStringArgs=getQueryStringArgs}(window),module.exports=Bridge});