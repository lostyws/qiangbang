define("page-load-interest",["zepto","common","underscore","juicer"],function(a,e,t){function i(a){for(var e=new Object,t=0;t<a.length;t++)e[a[t]]=new Object,e[a[t]].id=a[t],e[a[t]].page=-1,e[a[t]].size=10,e[a[t]].canLoad=!0;return l=a.slice(1),e}function d(a,e,t,i){if(1!=v){v=!0,w[e].page++,window.param.city||(window.param.city="");var d={};d="/weixin/service/getInterestService"==a?{page:w[e].page,pageSize:w[e].size,categoryIdList:w[e].id}:{page:w[e].page,pageSize:w[e].size,cityfilter:window.param.city,categoryIdList:w[e].id},"all"==d.categoryIdList&&(d.categoryIdList=l.toString()),!d.cityfilter||"重庆"!=d.cityfilter&&"天津"!=d.cityfilter&&"上海"!=d.cityfilter&&"北京"!=d.cityfilter||(d.provincefilter=d.cityfilter,d.cityfilter=""),h.show(),g.ajax({url:a,data:d,type:i,dataType:"json",success:function(a){o(e,t,a.data),v=!1,h.hide()},error:function(){p.animaTips("网络错误"),v=!1,h.hide()}})}}function o(a,e,t){y.removeClass("active"),g('.page-item[data-cate-id="'+a+'"]').addClass("active"),t&&t.length>0?(g('.page-item[data-cate-id="'+a+'"] .load-none').hide(),g('.page-item[data-cate-id="'+a+'"] .load-over').hide(),c(a,e,t),w[a].page>2&&g('.page-item[data-cate-id="'+a+'"] .load-more').show()):(w[a].canLoad=!1,g('.page-item[data-cate-id="'+a+'"] .load-more').hide(),w[a].page>2&&g('.page-item[data-cate-id="'+a+'"] .load-over').show(),0==w[a].page&&g('.page-item[data-cate-id="'+a+'"] .load-none').show())}function c(a,e,t){var i={};i.list=t,g('.ul-dom[data-cate-id="'+a+'"]').append(m(e,i)),g('.ul-dom[data-cate-id="'+a+'"]').find("a").each(function(){g(this).attr("data-linkid",g(".tab-link.active").data("linkid"))}),g("img[data-image]").each(function(){var a=g(this);p.changeImgDefault(a,a.data("image"))})}function n(a,e,t,o){w=s.isArray(e)?i(e):e,g(window).on("scroll",function(){var e=g(".page-item:visible").data("cateId");if(e&&!v&&w[e].canLoad&&!(w[e].page>2)){var i=f.scrollHeight-u.clientHeight-f.scrollTop;502>i&&d(t,e,a,o)}}),g(".load-more").on("click",function(e){var i=g(e.target).parents(".page-item").data("cateId");d(t,i,a,o),g('.page-item[data-cate-id="'+i+'"] .load-more').hide()})}function r(a){w=i(a)}var l,g=a("zepto"),p=a("common"),s=a("underscore"),m=a("juicer"),f=document.body,u=document.documentElement,h=g(".list-data-loading"),y=g(".page-item"),v=!1,w={};t.exports={pageLoad:n,loadData:d,resetAttrGroup:r}});