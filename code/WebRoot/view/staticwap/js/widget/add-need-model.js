define("add-need-model",["zepto","common","juicer"],function(e,t){var n=e("zepto"),a=e("common"),d=e("juicer");t.addNeedModel=function(){var e=n(".demand-form");n(".add-needs-discription, .needs-discription-more").on("click",function(){e.html("");var t,o=n(this),c=n("#module-demand-form").html(),s=n("#category").data("categoryid");return"undefined"==typeof s?(a.animationTips(),void n("#animationTips span").html("请选择类目！")):(e.show(),t=o.attr("data-modelUrl")+"?categoryId="+n("#category").data("categoryid"),void n.getJSON(t,function(t){if(t){if(t.list=t.list||[],t.list.length){var a=d(c,t);e.append('<div class="left-arrow"></div>'+a)}}else n(".demand-form").append('<div class="left-arrow"></div><div class="inner bg-white fsize-16 with-padding">没有返回的数据</div>'),e.on("click",function(){n(this).hide()})}))}),n("body").on("click",".demand-confirm button",function(){n(".add-needs-discription").hide();var e=n("/view/staticwap/js/widget/.needs-discription-more .display-box .item");e.html(""),n(".demand-block").each(function(){var t=n(this);t.find("select").val()&&(t.find("selcet").attr("data-chooseValue",t.find("select").val()),e.append('<p class="fcolor-grey-6">'+t.find("h3 span").text()+'：<strong class="fcolor-grey-2">'+t.find("select").val()+"</strong></p>")),t.find('.demand-radio .demand-content input[type="hidden"]').attr("checked")&&e.append('<p class="fcolor-grey-6">'+t.find("h3 span").text()+'：<strong class="fcolor-grey-2">'+t.find(".demand-content").attr("data-chooseValue")+"</strong></p>"),t.find('input[type="text"]').val()&&e.append('<p class="fcolor-grey-6">'+t.find("h3 span").text()+'：<strong class="fcolor-grey-2">'+t.find('input[type="text"]').val()+"</strong></p>"),t.hasClass("demand-checkbox")&&t.find(".demand-content").attr("data-chooseValue")&&e.append('<p class="fcolor-grey-6">'+t.find("h3 span").text()+'：<strong class="fcolor-grey-2">'+t.find(".demand-content").attr("data-chooseValue")+"</p>"),t.hasClass("demand-input")&&t.find('input[type="text"]').val()&&(t.find(".demand-content").attr("data-chooseValue",t.find('input[type="text"]').val()),e.append('<p class="fcolor-grey-6">'+t.find("h3 span").text()+'：<strong class="fcolor-grey-2">'+t.find(".demand-content").attr("data-chooseValue")+"</p>"))}),n(".demand-form").hide(),n(".needs-discription-more").show()}),n("body").on("click",".demand-content .radio",function(){function e(){t.closest(".demand-content").attr("data-chooseValue",a.val())}var t=n(this),a=t.siblings('input[type="hidden"]');return t.hasClass("select")?(t.removeClass("select"),a.attr("checked","").val(""),void e()):(t.addClass("select").siblings(".radio").removeClass("select"),a.attr("checked","checked").val(t.text()),void e())}),n("body").on("click",".demand-content .checkbox",function(){function e(){t.closest(".demand-content").children(".item").each(function(){var e=n(this);e.children(".checkbox").hasClass("select")&&a.push(e.children(".checkbox.select").text())}),t.closest(".demand-content").attr("data-chooseValue",a.join("、"))}var t=n(this),a=[],d=t.siblings('input[type="hidden"]');return t.hasClass("select")?(t.removeClass("select"),d.attr("checked","").val(""),void e()):(t.addClass("select"),d.attr("checked","checked").val(t.text()),void e())}),n("body").on("click","select.demand-content",function(){var e=n(this);e.attr("data-chooseValue",e.val())})}});