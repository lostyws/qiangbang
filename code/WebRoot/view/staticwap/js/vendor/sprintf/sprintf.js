!function(e){function n(){var e=arguments[0],t=n.cache;return t[e]&&t.hasOwnProperty(e)||(t[e]=n.parse(e)),n.format.call(null,t[e],arguments)}function t(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function r(e,n){return Array(n+1).join(e)}var s={not_string:/[^s]/,number:/[dief]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};n.format=function(e,o){var i,a,l,f,c,p,u,d=1,g=e.length,h="",x=[],b=!0,y="";for(a=0;g>a;a++)if(h=t(e[a]),"string"===h)x[x.length]=e[a];else if("array"===h){if(f=e[a],f[2])for(i=o[d],l=0;l<f[2].length;l++){if(!i.hasOwnProperty(f[2][l]))throw new Error(n("[sprintf] property '%s' does not exist",f[2][l]));i=i[f[2][l]]}else i=f[1]?o[f[1]]:o[d++];if("function"==t(i)&&(i=i()),s.not_string.test(f[8])&&s.not_json.test(f[8])&&"number"!=t(i)&&isNaN(i))throw new TypeError(n("[sprintf] expecting number but found %s",t(i)));switch(s.number.test(f[8])&&(b=i>=0),f[8]){case"b":i=i.toString(2);break;case"c":i=String.fromCharCode(i);break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,f[6]?parseInt(f[6]):0);break;case"e":i=f[7]?i.toExponential(f[7]):i.toExponential();break;case"f":i=f[7]?parseFloat(i).toFixed(f[7]):parseFloat(i);break;case"o":i=i.toString(8);break;case"s":i=(i=String(i))&&f[7]?i.substring(0,f[7]):i;break;case"u":i>>>=0;break;case"x":i=i.toString(16);break;case"X":i=i.toString(16).toUpperCase()}s.json.test(f[8])?x[x.length]=i:(!s.number.test(f[8])||b&&!f[3]?y="":(y=b?"+":"-",i=i.toString().replace(s.sign,"")),p=f[4]?"0"===f[4]?"0":f[4].charAt(1):" ",u=f[6]-(y+i).length,c=f[6]&&u>0?r(p,u):"",x[x.length]=f[5]?y+i+c:"0"===p?y+c+i:c+y+i)}return x.join("")},n.cache={},n.parse=function(e){for(var n=e,t=[],r=[],o=0;n;){if(null!==(t=s.text.exec(n)))r[r.length]=t[0];else if(null!==(t=s.modulo.exec(n)))r[r.length]="%";else{if(null===(t=s.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){o|=1;var i=[],a=t[2],l=[];if(null===(l=s.key.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(i[i.length]=l[1];""!==(a=a.substring(l[0].length));)if(null!==(l=s.key_access.exec(a)))i[i.length]=l[1];else{if(null===(l=s.index_access.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");i[i.length]=l[1]}t[2]=i}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r[r.length]=t}n=n.substring(t[0].length)}return r};var o=function(e,t,r){return r=(t||[]).slice(0),r.splice(0,0,e),n.apply(null,r)};"undefined"!=typeof exports?(exports.sprintf=n,exports.vsprintf=o):(e.sprintf=n,e.vsprintf=o,"function"==typeof define&&define.amd&&define("zepto",[],function(){return{sprintf:n,vsprintf:o}}))}("undefined"==typeof window?this:window);