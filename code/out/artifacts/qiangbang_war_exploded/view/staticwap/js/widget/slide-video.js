define("slide-video",["zepto","swipe"],function(e,i,t){var a=e("zepto"),s=e("swipe");t.exports={slide:function(){function e(e){for(var i=n.length;i--;)n[i].className=n[i].className.replace("active"," ");n[e].className="active"}var i=document.getElementById("slider");window.mySwipe=new s(i,{startSlide:0,speed:400,auto:!1,continuous:!0,disableScroll:!1,stopPropagation:!1,callback:function(i){e(i);var t=a("#slider"),s=t.find(".playing");if(s.size()>0){var n=s.find("video").get(0);n.pause(),n.currentTime=0,s.find("video").remove(),s.removeClass("playing"),a(".loading").hide(),a(".play-video").show()}},transitionEnd:function(){}});for(var t,n=a(".slide_indicators li"),o=0;o<n.length;o++)t=n[o],t.setAttribute("data-tab",o),t.onclick=function(){mySwipe.slide(parseInt(this.getAttribute("data-tab"),10),500)};a(document).on("click",".play-video",function(e){var i=a(e.target).closest(".slide");i.addClass("playing");var t=i.find("video").get(0);t.play()}),a(".play-video").each(function(){a(this).attr("data-src")?(a(this).show(),a(this).click(function(e){e.preventDefault(),a('<video class="video" controls="controls" src=""></video>').insertBefore(this),a(".video").attr("src",a(this).attr("data-src"));var t=a(this).siblings(".video");t.show();var s=a(this).siblings(".loading");s.show();var n=a(this).siblings(".video")[0],o=setInterval(function(){n.currentTime>0&&(s.hide(),clearInterval(o))},25);n.play(),a(this).hide(),s.click(function(e){e.preventDefault(),a(this).hide(),a(".video").remove(),a(this).siblings(".play-video").show();var t=i.find(".playing");t.removeClass("playing")})})):a(this).hide()})},initSlider:function(){function e(e){var i=s(e,{auto:3e3,continuous:!0,callback:function(e){for(var i=t.length;i--;)t[i].className=" ";t[e].className="active"}}),t=e.children[1].getElementsByTagName("li");return t[0].className="active",i}for(var i=document.getElementsByClassName("slides_wrap").length,t=0;i>t;t++)e(document.getElementsByClassName("slides_wrap")[t])}}});